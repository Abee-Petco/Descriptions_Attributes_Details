!function(e){var t={};function n(r){if(t[r])return t[r].exports;var i=t[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(r,i,function(t){return e[t]}.bind(null,i));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=15)}([function(e,t){e.exports=require("react")},function(e,t){e.exports=require("axios")},function(e,t){e.exports=require("newrelic")},function(e,t){e.exports=require("morgan")},function(e,t){e.exports=require("express")},function(e,t){e.exports=require("path")},function(e,t){e.exports=require("redis")},function(e,t){e.exports=require("react-dom/server")},function(e,t){e.exports=require("fs")},function(e,t,n){var r=new(0,n(10).Pool)({user:n(11).user,port:5432,database:"petco_descriptions"});e.exports.db=r.connect((function(e,t,n){if(e)return console.error("connection failed",e.stack);t.query("SELECT NOW()",(function(e,t){if(e)return console.error("Error executing query",e.stack);console.log("connected to pg",t.rows)}))}));e.exports.getDescriptionObject=function(e){return r.query("SELECT itemId, title, description, sku, daysToShip, directions, material, length, width, additionalDetails, primaryBrand, primaryColor FROM descriptions JOIN colors ON descriptions.color_id=colors.colorId JOIN brands ON descriptions.brand_id=brands.brandId WHERE descriptions.itemId=".concat(e)).then((function(e){return e.rows[0].SKU=e.rows[0].sku,e.rows[0].daysToShip=e.rows[0].daystoship,e.rows[0].additionalDetails=e.rows[0].additionaldetails,e.rows[0].primaryColor=e.rows[0].primarycolor,e.rows[0].primaryBrand=e.rows[0].primarybrand,e.rows})).catch((function(e){throw e}))},e.exports.getTitleAndBrand=function(e){return r.query("SELECT title, primarybrand FROM descriptions JOIN brands ON descriptions.brand_id=brands.brandId WHERE itemId=".concat(e)).then((function(e){return e.rows[0].primaryBrand=e.rows[0].primarybrand,delete e.rows[0].primarybrand,e})).catch((function(e){throw e}))},e.exports.getTitlesAndBrands=function(e){var t="";return e.map((function(e){return t+=e+", "})),t=t.slice(0,-2),r.query("SELECT title, primarybrand FROM descriptions JOIN brands ON descriptions.brand_id=brands.brandId WHERE itemId IN (".concat(t,")")).then((function(e){return e.rows.map((function(e){e.primaryBrand=e.primarybrand,delete e.primarybrand})),e.rows})).catch((function(e){throw console.log("failtown"),e}))}},function(e,t){e.exports=require("pg")},function(e,t){e.exports.user="samjohnson"},function(e,t,n){var r=n(13),i=new(0,n(14).Mockgoose)(r);"mockgoose"===process.env.node_env?i.prepareStorage().then((function(){console.log("mockgoose running"),r.connect("mongodb://localhost/petco_descriptions",{useUnifiedTopology:!0,useNewUrlParser:!0})})).catch((function(e){console.log("Mockgoose connection failed: ",e)})):r.connect("mongodb://localhost/petco_descriptions",{useUnifiedTopology:!0,useNewUrlParser:!0});var o=r.connection;o.on("error",(function(){console.log("error connecting to db")})),o.once("open",(function(){console.log("connected to mongoDB")}));var a=new r.Schema({title:{type:String,required:!0},description:String,SKU:Number,primaryBrand:String,daysToShip:String},{_id:!1}),s=new r.Schema({directions:String},{_id:!1}),c=new r.Schema({primaryColor:String,material:String,length:String,width:String},{_id:!1}),l=new r.Schema({additionalDetails:String},{_id:!1}),d=new r.Schema({itemId:{type:Number,required:!0},description:a,directions:s,attributes:c,details:l}),u=r.model("Description",d);e.exports.Description=u,e.exports.db=o,e.exports.getTitleAndBrand=function(e){return u.aggregate([{$match:{itemId:e}},{$project:{title:"$description.title",primaryBrand:"$description.primaryBrand",_id:0}},{$limit:1}]).hint({itemId:1}).exec()},e.exports.getDescriptionObject=function(e){return u.find({itemId:e},{_id:0,__v:0,itemId:0}).limit(1).lean().exec()},e.exports.getTitlesAndBrands=function(e){return u.aggregate([{$match:{itemId:{$in:e}}},{$project:{title:"$description.title",primaryBrand:"$description.primaryBrand",_id:0}},{$limit:e.length}]).hint({itemId:1}).exec()},e.exports.postDescriptionObject=function(e){return new u(e).save({validateBeforeSave:!1})},e.exports.putDescriptionObject=function(e,t){return u.update({itemId:e},t,{upsert:!0,hint:{itemId:1}})},e.exports.deleteDescriptionObject=function(e){return u.remove({itemId:e},{justOne:!0})}},function(e,t){e.exports=require("mongoose")},function(e,t){e.exports=require("mockgoose")},function(e,t,n){"use strict";n.r(t);var r=n(0),i=n.n(r),o={display:"inline-table",width:"auto",verticalAlign:"middle",border:"2px solid #fff",borderRadius:"5px",margin:"0 10px",transition:".3s",padding:"0 17px",textAlign:"center",maxWidth:"200px",height:"50px",boxSizing:"border-box",cursor:"pointer",position:"relative",color:"#005891",fontSize:".9375em",fontWeight:"bold",backgroundColor:"white"},a={color:"#333",fontSize:".9375em",lineHeight:"1.6em",fontFamily:"Arial, sans-serif"},s={margin:"0px 20px",padding:"0",border:"0",fontSize:"100%",font:"inherit",verticalAlign:"baseline"},c={color:"#333",fontFamily:"tahoma, arial, helvetica, sans-serif",fontSize:"12px"},l={margin:"0px 20px",padding:"0",border:"0",fontSize:"100%",font:"inherit",verticalAlign:"baseline"},d={width:"34%",margin:"0",fontFamily:"Arial, sans-serif",lineHeight:"1.25em",listStyle:"none",marginBottom:"20px"},u={width:"34%",margin:"0",fontFamily:"Arial, sans-serif",lineHeight:"1.25em",listStyle:"none",marginBottom:"20px",float:"right"},p={color:"#333",fontSize:".9375em",fontFamily:"Arial, sans-serif",lineHeight:"1.6em",display:"block",marginBlockStart:"1em",marginBlockEnd:"1em",marginInlineStart:"0px",marginInlineEnd:"0px",textAlign:"left",verticalAlign:"baseline",margin:"0",padding:"0"},m={display:"block",marginBlockStart:"1em",marginBlockEnd:"1em",marginInlineStart:"0px",marginInlineEnd:"40px",lineHeight:"1.25em",color:"#333",fontSize:".9375em",fontFamily:"Arial, sans-serif",textAlign:"left",margin:"0"},f={backgroundColor:"rgba(233,236,237,0.5)",borderTop:"1px solid #d4dadc",borderBottom:"1px solid #d4dadc"},y={backgroundColor:"rgba(233,236,237,0.5)",borderTop:"1px solid #d4dadc",borderBottom:"1px solid #d4dadc",fontStyle:"italic",textAlign:"left",fontWeight:"bold",fontSize:"0.9375em",whiteSpace:"nowrap"},g={boxSizing:"border-box",display:"inline-block",padding:"9px 11px",color:"#333",width:"40%",fontWeight:"bold",fontSize:"0.9375em"},b={boxSizing:"border-box",display:"inline-block",padding:"9px 11px",position:"relative",left:"135px",fontSize:"0.9375em",color:"#333",vertialAlign:"middle"},h={boxSizing:"border-box",display:"inline-block",padding:"9px 11px",position:"relative",left:"10px",fontSize:"0.9375em",color:"#333",vertialAlign:"middle"},v=function(e){return i.a.createElement("div",{id:"descriptionTab",style:s},i.a.createElement("span",{id:"left",style:{float:"left"}},i.a.createElement("p",{style:p},e.description.title),i.a.createElement("ul",{style:m},e.description.description.map((function(e){return i.a.createElement("li",null,e)})))),i.a.createElement("span",null,i.a.createElement("ul",{className:"table",style:u},i.a.createElement("li",{className:"tableLine",style:f},i.a.createElement("span",{className:"key",style:g},"SKU"),i.a.createElement("span",{className:"val",style:h},e.description.SKU)),i.a.createElement("li",{className:"tableLine gray"},i.a.createElement("span",{className:"key",style:g},"Primary Brand"),i.a.createElement("span",{className:"val",style:h},e.description.primaryBrand)),i.a.createElement("li",{className:"tableLine",style:f},i.a.createElement("span",{className:"key",style:g},"Days to Ship"),i.a.createElement("span",{className:"val",style:h},e.description.daysToShip)))))},x=function(e){return i.a.createElement("div",{id:"directionsTab",style:s},i.a.createElement("p",{style:a},e.directions))},S=function(e){return i.a.createElement("div",{id:"attributesTab"},i.a.createElement("ul",{className:"table2",style:d},i.a.createElement("li",{className:"tableLine",style:y},i.a.createElement("span",{className:"key",style:g},"Additional Features"),i.a.createElement("span",{className:"val",style:b})),i.a.createElement("li",{className:"tableLine gray"},i.a.createElement("span",{className:"key",style:g},"Primary Color"),i.a.createElement("span",{className:"val",style:b},e.attributes.primaryColor)),i.a.createElement("li",{className:"tableLine",style:f},i.a.createElement("span",{className:"key",style:g},"Material"),i.a.createElement("span",{className:"val",style:b},e.attributes.material))),i.a.createElement("ul",{className:"table2",style:d},i.a.createElement("li",{className:"tableLine",style:y},i.a.createElement("span",{className:"key",style:g},"Item Dimensions"),i.a.createElement("span",{className:"val",style:b})),i.a.createElement("li",{className:"tableLine gray"},i.a.createElement("span",{className:"key",style:g},"Length"),i.a.createElement("span",{className:"val",style:b},e.attributes.length)),i.a.createElement("li",{className:"tableLine",style:f},i.a.createElement("span",{className:"key",style:g},"Width"),i.a.createElement("span",{className:"val",style:b},e.attributes.width))))},E=function(e){return i.a.createElement("div",{id:"additionalTab",style:l},i.a.createElement("p",{style:c},e.additional))};n(1);function O(e){return(O="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function w(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function I(e,t){return(I=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function N(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=M(e);if(t){var i=M(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return _(this,n)}}function _(e,t){return!t||"object"!==O(t)&&"function"!=typeof t?k(e):t}function k(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function M(e){return(M=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var j=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&I(e,t)}(s,e);var t,n,r,a=N(s);function s(e){var t,n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,s),t=a.call(this,e);var r=e.initCurrent;return e.initData?n=e.initData:(n=window.__initData__,delete window.__initData__),t.state={current:r,data:n},t.changeModule=t.changeModule.bind(k(t)),t.onMouseOver=t.onMouseOver.bind(k(t)),t.onMouseOut=t.onMouseOut.bind(k(t)),t}return t=s,(n=[{key:"changeModule",value:function(e){var t=e.target.id;this.setState({current:t})}},{key:"onMouseOver",value:function(e){document.getElementById(e.target.id).style.color="#00395e"}},{key:"onMouseOut",value:function(e){document.getElementById(e.target.id).style.color="#005891"}},{key:"render",value:function(){return i.a.createElement("div",{id:"indexComponent"},i.a.createElement("div",{id:"buttons",style:{width:"875px",margin:"30px auto"}},i.a.createElement("span",{style:{marginLeft:"100px"}},i.a.createElement("button",{id:"descriptionB",style:o,onMouseOver:this.onMouseOver,onMouseLeave:this.onMouseOut,onClick:this.changeModule},"Description"),i.a.createElement("button",{id:"directionsB",style:o,onMouseOver:this.onMouseOver,onMouseLeave:this.onMouseOut,onClick:this.changeModule},"Directions"),i.a.createElement("button",{id:"attributesB",style:o,onMouseOver:this.onMouseOver,onMouseLeave:this.onMouseOut,onClick:this.changeModule},"Attributes/Specifications"),i.a.createElement("button",{id:"additionalB",style:o,onMouseOver:this.onMouseOver,onMouseLeave:this.onMouseOut,onClick:this.changeModule},"Additional Details"))),"descriptionB"===this.state.current&&i.a.createElement(v,{description:this.state.data.description}),"directionsB"===this.state.current&&i.a.createElement(x,{directions:this.state.data.directions.directions}),"attributesB"===this.state.current&&i.a.createElement(S,{attributes:this.state.data.attributes}),"additionalB"===this.state.current&&i.a.createElement(E,{additional:this.state.data.details.additionalDetails}))}}])&&w(t.prototype,n),r&&w(t,r),s}(i.a.Component);function B(e){throw new Error('"'+e+'" is read-only')}n(2),n(3);var A,C=n(4),D=(n(5),n(6).createClient()),T=n(7),q=n(0);n(8),n(1);A="postgres"===process.env.node_env?n(9):n(12);var L=C();L.use(C.json()),L.use((function(e,t,n){var r="http://localhost",i="http://localhost",o="http://localhost";e.headers.referer&&(e.headers.referer.includes("".concat(i,":3004"))?t.header("Access-Control-Allow-Origin","".concat(i,":3004")):e.headers.referer.includes("3005")?t.header("Access-Control-Allow-Origin","".concat(r,":3005")):e.headers.referer.includes("".concat(o,":3006"))?t.header("Access-Control-Allow-Origin","".concat(o,":3006")):e.headers.referer.includes("".concat(r,":3000"))?t.header("Access-Control-Allow-Origin","".concat(r,":3000")):e.headers.referer.includes("".concat(i,":3000"))?t.header("Access-Control-Allow-Origin","".concat(i,":3000")):e.headers.referer.includes("".concat(o,":3000"))&&t.header("Access-Control-Allow-Origin","".concat(o,":3000"))),n()}));var P=function(e,t,n){var r="__expIress"+e.originalUrl||!1;D.get(r,(function(e,i){i?t.send(i):(t.sendResponse=t.send,t.send=function(e){"string"==typeof e?D.set(r,e):D.set(r,JSON.stringify(e)),t.sendResponse(e)},n())}))};L.get("*.js",(function(e,t,n){e.url=e.url+".gz",t.set({"Content-Encoding":"gzip","Content-Type":"application/javascript"}),n()})),L.get("/",P,(function(e,t){var n=e.originalUrl.slice(3);A.getDescriptionObject(n).then((function(e){e[0]||t.sendStatus(404);var n=e[0].description.description.split(". ");e[0].description.description=n;var r=T.renderToString(q.createElement(j,{initData:e[0]}));return t.send("\n      <!DOCTYPE html>\n      <html>\n        <head>\n          <title>PetCo</title>\n          <script>window.__initData__ = ".concat(JSON.stringify(e[0]),"<\/script>\n          <script crossorigin src=\"https://unpkg.com/react@16/umd/react.production.min.js\"><\/script>\n          <script crossorigin src=\"https://unpkg.com/react-dom@16/umd/react-dom.production.min.js\"><\/script>\n          \x3c!-- <link href='style.css' rel='stylesheet' type='text/css'> --\x3e\n        </head>\n        <body>\n          <div id=\"description\">").concat(r,'</div>\n          <script src="bundle.js"><\/script>\n        </body>\n      </html>\n    '))})).catch((function(e){console.log(t),404!==t.statusCode&&t.sendStatus(500)}))})),L.use(C.static("client/public")),L.get("/itemInformation/:itemId",(function(e,t){var n=e.params.itemId;if(n.includes("array")){for(var r=n.substring(5).split(",").map((function(e){return parseInt(e)})),i=!1,o=0;o<r.length;o++)if(r[o]<100||r[o]>10000100){t.status(404).send("Invalid itemId"),B("invalidId"),i=!0;break}i||A.getTitlesAndBrands(r).then((function(e){t.send(e)})).catch((function(e){t.status(404)}))}else n<100||n>10000100?t.status(404).send("Invalid itemId"):A.getTitleAndBrand(parseInt(n)).then((function(e){t.send(e[0])})).catch((function(e){t.status(500).send(e)}))})),L.get("/descriptionObject/:itemId",P,(function(e,t){var n=e.params.itemId;A.getDescriptionObject(n).then((function(e){e[0]?t.send(e[0]):t.sendStatus(404)})).catch((function(e){t.status(500).send(e)}))})),L.post("/descriptionObject",(function(e,t){var n=e.body;A.postDescriptionObject(n).then((function(e){e&&t.sendStatus(201)})).catch((function(e){11e3===e.code?t.sendStatus(409):t.sendStatus(500)}))})),L.put("/descriptionObject/:itemId",(function(e,t){var n=e.body,r=e.params.itemId;A.putDescriptionObject(r,n).then((function(e){e?t.sendStatus(200):t.sendStatus(201),D.flushdb()})).catch((function(e){t.sendStatus(500)}))})),L.delete("/descriptionObject/:itemId",(function(e,t){var n=e.params.itemId;A.deleteDescriptionObject(n).then((function(e){e?t.sendStatus(200):t.sendStatus(404),D.flushdb()})).catch((function(e){t.sendStatus(500)}))})),L.listen(3002,(function(){console.log("server is listening on port 3002")}))}]);